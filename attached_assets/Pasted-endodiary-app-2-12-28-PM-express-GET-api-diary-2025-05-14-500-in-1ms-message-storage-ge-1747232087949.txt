endodiary-app  | 2:12:28 PM [express] GET /api/diary/2025-05-14 500 in 1ms :: {"message":"storage.getUser is not a fu…
endodiary-app  | TypeError: storage.getUser is not a function
endodiary-app  |     at <anonymous> (/app/server/auth.ts:78:34)
endodiary-app  |     at pass (/app/node_modules/passport/lib/authenticator.js:372:9)
endodiary-app  |     at Authenticator.deserializeUser (/app/node_modules/passport/lib/authenticator.js:377:5)
endodiary-app  |     at SessionStrategy.authenticate (/app/node_modules/passport/lib/strategies/session.js:112:10)
endodiary-app  |     at attempt (/app/node_modules/passport/lib/middleware/authenticate.js:378:16)
endodiary-app  |     at authenticate (/app/node_modules/passport/lib/middleware/authenticate.js:379:7)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at initialize (/app/node_modules/passport/lib/middleware/initialize.js:98:5)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at Immediate.<anonymous> (/app/node_modules/express-session/index.js:514:7)
endodiary-app  |     at process.processImmediate (node:internal/timers:485:21)
endodiary-app  | TypeError: storage.getUser is not a function
endodiary-app  |     at <anonymous> (/app/server/auth.ts:78:34)
endodiary-app  |     at pass (/app/node_modules/passport/lib/authenticator.js:372:9)
endodiary-app  |     at Authenticator.deserializeUser (/app/node_modules/passport/lib/authenticator.js:377:5)
endodiary-app  |     at SessionStrategy.authenticate (/app/node_modules/passport/lib/strategies/session.js:112:10)
endodiary-app  |     at attempt (/app/node_modules/passport/lib/middleware/authenticate.js:378:16)
endodiary-app  |     at authenticate (/app/node_modules/passport/lib/middleware/authenticate.js:379:7)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at initialize (/app/node_modules/passport/lib/middleware/initialize.js:98:5)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at Immediate.<anonymous> (/app/node_modules/express-session/index.js:514:7)
endodiary-app  |     at process.processImmediate (node:internal/timers:485:21)
endodiary-app  | 2:12:29 PM [express] GET /api/diary/2025-05-14 500 in 1ms :: {"message":"storage.getUser is not a fu…
endodiary-app  | TypeError: storage.getUser is not a function
endodiary-app  |     at <anonymous> (/app/server/auth.ts:78:34)
endodiary-app  |     at pass (/app/node_modules/passport/lib/authenticator.js:372:9)
endodiary-app  |     at Authenticator.deserializeUser (/app/node_modules/passport/lib/authenticator.js:377:5)
endodiary-app  |     at SessionStrategy.authenticate (/app/node_modules/passport/lib/strategies/session.js:112:10)
endodiary-app  |     at attempt (/app/node_modules/passport/lib/middleware/authenticate.js:378:16)
endodiary-app  |     at authenticate (/app/node_modules/passport/lib/middleware/authenticate.js:379:7)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at initialize (/app/node_modules/passport/lib/middleware/initialize.js:98:5)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at Immediate.<anonymous> (/app/node_modules/express-session/index.js:514:7)
endodiary-app  |     at process.processImmediate (node:internal/timers:485:21)
endodiary-app  | TypeError: storage.getUser is not a function
endodiary-app  |     at <anonymous> (/app/server/auth.ts:78:34)
endodiary-app  |     at pass (/app/node_modules/passport/lib/authenticator.js:372:9)
endodiary-app  |     at Authenticator.deserializeUser (/app/node_modules/passport/lib/authenticator.js:377:5)
endodiary-app  |     at SessionStrategy.authenticate (/app/node_modules/passport/lib/strategies/session.js:112:10)
endodiary-app  |     at attempt (/app/node_modules/passport/lib/middleware/authenticate.js:378:16)
endodiary-app  |     at authenticate (/app/node_modules/passport/lib/middleware/authenticate.js:379:7)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at initialize (/app/node_modules/passport/lib/middleware/initialize.js:98:5)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at Immediate.<anonymous> (/app/node_modules/express-session/index.js:514:7)
endodiary-app  |     at process.processImmediate (node:internal/timers:485:21)
endodiary-app  | 2:12:31 PM [express] GET /api/diary/2025-05-14 500 in 1ms :: {"message":"storage.getUser is not a fu…
endodiary-app  | TypeError: storage.getUser is not a function
endodiary-app  |     at <anonymous> (/app/server/auth.ts:78:34)
endodiary-app  |     at pass (/app/node_modules/passport/lib/authenticator.js:372:9)
endodiary-app  |     at Authenticator.deserializeUser (/app/node_modules/passport/lib/authenticator.js:377:5)
endodiary-app  |     at SessionStrategy.authenticate (/app/node_modules/passport/lib/strategies/session.js:112:10)
endodiary-app  |     at attempt (/app/node_modules/passport/lib/middleware/authenticate.js:378:16)
endodiary-app  |     at authenticate (/app/node_modules/passport/lib/middleware/authenticate.js:379:7)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at initialize (/app/node_modules/passport/lib/middleware/initialize.js:98:5)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at Immediate.<anonymous> (/app/node_modules/express-session/index.js:514:7)
endodiary-app  |     at process.processImmediate (node:internal/timers:485:21)
endodiary-app  | 2:12:35 PM [express] GET /api/diary/2025-05-14 500 in 1ms :: {"message":"storage.getUser is not a fu…
endodiary-app  | TypeError: storage.getUser is not a function
endodiary-app  |     at <anonymous> (/app/server/auth.ts:78:34)
endodiary-app  |     at pass (/app/node_modules/passport/lib/authenticator.js:372:9)
endodiary-app  |     at Authenticator.deserializeUser (/app/node_modules/passport/lib/authenticator.js:377:5)
endodiary-app  |     at SessionStrategy.authenticate (/app/node_modules/passport/lib/strategies/session.js:112:10)
endodiary-app  |     at attempt (/app/node_modules/passport/lib/middleware/authenticate.js:378:16)
endodiary-app  |     at authenticate (/app/node_modules/passport/lib/middleware/authenticate.js:379:7)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at initialize (/app/node_modules/passport/lib/middleware/initialize.js:98:5)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at Immediate.<anonymous> (/app/node_modules/express-session/index.js:514:7)
endodiary-app  |     at process.processImmediate (node:internal/timers:485:21)
endodiary-app  | 2:13:16 PM [express] POST /api/diary 500 in 1ms :: {"message":"storage.getUser is not a function"}
endodiary-app  | TypeError: storage.getUser is not a function
endodiary-app  |     at <anonymous> (/app/server/auth.ts:78:34)
endodiary-app  |     at pass (/app/node_modules/passport/lib/authenticator.js:372:9)
endodiary-app  |     at Authenticator.deserializeUser (/app/node_modules/passport/lib/authenticator.js:377:5)
endodiary-app  |     at SessionStrategy.authenticate (/app/node_modules/passport/lib/strategies/session.js:112:10)
endodiary-app  |     at attempt (/app/node_modules/passport/lib/middleware/authenticate.js:378:16)
endodiary-app  |     at authenticate (/app/node_modules/passport/lib/middleware/authenticate.js:379:7)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at initialize (/app/node_modules/passport/lib/middleware/initialize.js:98:5)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at Immediate.<anonymous> (/app/node_modules/express-session/index.js:514:7)
endodiary-app  |     at process.processImmediate (node:internal/timers:485:21)
endodiary-app  | TypeError: storage.getUser is not a function
endodiary-app  |     at <anonymous> (/app/server/auth.ts:78:34)
endodiary-app  |     at pass (/app/node_modules/passport/lib/authenticator.js:372:9)
endodiary-app  |     at Authenticator.deserializeUser (/app/node_modules/passport/lib/authenticator.js:377:5)
endodiary-app  |     at SessionStrategy.authenticate (/app/node_modules/passport/lib/strategies/session.js:112:10)
endodiary-app  |     at attempt (/app/node_modules/passport/lib/middleware/authenticate.js:378:16)
endodiary-app  |     at authenticate (/app/node_modules/passport/lib/middleware/authenticate.js:379:7)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at initialize (/app/node_modules/passport/lib/middleware/initialize.js:98:5)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at Immediate.<anonymous> (/app/node_modules/express-session/index.js:514:7)
endodiary-app  |     at process.processImmediate (node:internal/timers:485:21)
endodiary-app  | 2:13:51 PM [express] POST /api/diary 500 in 1ms :: {"message":"storage.getUser is not a function"}
endodiary-app  | TypeError: storage.getUser is not a function
endodiary-app  |     at <anonymous> (/app/server/auth.ts:78:34)
endodiary-app  |     at pass (/app/node_modules/passport/lib/authenticator.js:372:9)
endodiary-app  |     at Authenticator.deserializeUser (/app/node_modules/passport/lib/authenticator.js:377:5)
endodiary-app  |     at SessionStrategy.authenticate (/app/node_modules/passport/lib/strategies/session.js:112:10)
endodiary-app  |     at attempt (/app/node_modules/passport/lib/middleware/authenticate.js:378:16)
endodiary-app  |     at authenticate (/app/node_modules/passport/lib/middleware/authenticate.js:379:7)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at initialize (/app/node_modules/passport/lib/middleware/initialize.js:98:5)
endodiary-app  |     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
endodiary-app  |     at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)
endodiary-app  |     at /app/node_modules/express/lib/router/index.js:286:9
endodiary-app  |     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
endodiary-app  |     at next (/app/node_modules/express/lib/router/index.js:280:10)
endodiary-app  |     at Immediate.<anonymous> (/app/node_modules/express-session/index.js:514:7)
endodiary-app  |     at process.processImmediate (node:internal/timers:485:21)
